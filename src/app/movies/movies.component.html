<div class="header">
  <app-header></app-header>
</div>

<div
  class="youtubeVideo"
  *ngIf="movieService.trailerKey && movieService.trailerClicked"
  (click)="goBack()"
>
  <youtube-player
    videoId="{{ movieService.trailerKey }}"
    suggestedQuality="highres"
    [width]="1500"
    [height]="890"
    [playerVars]="playerConfig"
  ></youtube-player>
</div>

<div
  class="imgDisplay"
  style="background-image: url({{ movieService.mainImg.image }})"
>
  <div class="imgDisplayDetails">
    <div class="btn-notFound">
      <a
        [href]="
          movieService.providerLink
            ? movieService.providerLink + '/custompage'
            : null
        "
        target="_blank"
      >
        <button class="trailerButton">Watch</button>
      </a>
      <button class="trailerButton" (click)="showVideo()">Play Trailer</button>
      <div
        *ngIf="!movieService.trailerKey && movieService.trailerClicked"
        style="color: red; font-size: 16px"
      >
        Video not found
      </div>

      <div
        *ngIf="!movieService.providerLink"
        style="color: red; font-size: 16px"
      >
        No providers yet
      </div>
    </div>
    <h1>{{ movieService.mainImg.name }}:</h1>
    <h2>{{ movieService.mainImg.overview }}</h2>
  </div>
  <div class="img-shadow"></div>
</div>

<div
  class="MainWrapper"
  (scrolled)="onScroll()"
  infinite-scroll
  [infiniteScrollDistance]="2"
  [infiniteScrollThrottle]="1000"
>
  <div class="mainDivider">
    <div class="listTitle">
      <h1>Popular Movies</h1>
      <button class="listScrollRight">
        <i class="fas fa-angle-right"></i>
      </button>
    </div>
    <app-movie-list-vertical
      [movies]="movieService.populerMovieList$"
    ></app-movie-list-vertical>

    <div class="listTitle">
      <h1>Trending Movies</h1>
      <button class="listScrollRight">
        <i class="fas fa-angle-right"></i>
      </button>
    </div>
    <app-movie-list-vertical
      [movies]="movieService.trendingMovieList$"
    ></app-movie-list-vertical>
  </div>

  <div class="listTitle" style="padding-top: 100px; margin-bottom: 40px">
    <h1>All Movies</h1>
    <button class="listScrollRight">
      <i class="fas fa-angle-right"></i>
    </button>
  </div>
  <app-movie-list-horizontal
    [movies]="movieService.allMoviesList$"
  ></app-movie-list-horizontal>
</div>
